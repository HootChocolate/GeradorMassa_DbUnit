package seuBarrigaPontoCom_Estrategia3;

import java.sql.SQLException;

public class MonitorarEstoqueDeMassa {

	private static Integer QUANTIDADE_MINIMA = 5;
	
	@SuppressWarnings("static-access")
	public static void monitorarQuantidadeDeContas() throws Exception {
		
		MassaDAOImpl massaDao = new MassaDAOImpl();
		GeradorDeMassa gerador = new GeradorDeMassa();
		
		while(true) {
			int quantidadeAtual = massaDao.obterQuantidadeDeContas(GeradorDeMassa.USUARIO);
			
			System.out.println("Quantidade de contas: " + quantidadeAtual);
			
			if(quantidadeAtual < QUANTIDADE_MINIMA) {
				gerador.gerarMassaDeDadosServico();
			} else {
				Thread.sleep(5000);
			}
			
			
		}
		
	}
	
	public static void main(String[] args) throws ClassNotFoundException, SQLException {
		monitorarQuantidadeDeContas();
	}
}

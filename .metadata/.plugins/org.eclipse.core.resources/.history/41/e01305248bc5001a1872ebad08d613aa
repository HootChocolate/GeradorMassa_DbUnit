package SeuBarrigaEstrategia2;

import static org.junit.Assert.assertEquals;

import org.junit.After;
import org.junit.Before;
import org.junit.Test;
import org.openqa.selenium.WebDriver;

import com.github.javafaker.Faker;

import Utils.BaseUtil;
import pages.HomePage;
import pages.ListaDeContasPage;
import pages.LoginPage;

public class SeuBarrigaPontoCom_SeleniumWebDriver extends BaseUtil{

	private WebDriver navegador;
	private Faker faker = new Faker();
	private static String nomeConta;
	
	@Before
	public void setUp() {
		navegador = getChromeWebDriver("http://seubarriga.wcaquino.me/login");
		nomeConta = faker.dragonBall().character();
		
		String alert = new LoginPage(navegador)
				.informarEmail("jose@jose.com")
				.informarSenha("josejose")
				.clicaNoBotaoEntrar()
				.getMensagemFeedback(navegador);
			
		assertEquals("[ERRO] Houveram erros durante a tentativa de login no Seu Barriga", "Bem vindo, jose!", alert);		
	}
	
	
	
//	@Test
	public void testInserirContaNoSeuBarriga() {
		
		String alert = inserirConta(nomeConta)
				.getMensagemFeedback(navegador);
		
		assertEquals("[ERRO] Houveram erros durante a tentativa de inserir uma conta", "Conta adicionada com sucesso!", alert);
	}
	
//	@Test
	public void testConsultarContaNoSeuBarriga() {

		String resultadoDaConsulta = inserirConta(nomeConta)
			.consultaUmaContaNaListaDeContas(navegador, nomeConta);
		
		assertEquals("[ERRO] Houveram erros an tentar consultar uma conta no Seu Barriga", resultadoDaConsulta, nomeConta);
	}
	
	@Test
	public void testEditarContaNoSeuBarriga() {
		
		inserirConta(nomeConta)
			.clicarNoBotaoEditarConta(navegador, nomeConta);

		
		
	}
	
//	@Test
	public void testRemoverContaNoSeuBarriga() {
		
	}
	
	public ListaDeContasPage inserirConta(String nomeConta) {
		return new HomePage(navegador)
			.clicarNoMenuContas(navegador)
			.clicarNaOpcaoAdicionar(navegador)
			.inserirNome(nomeConta)
			.clicarNoBotaoSalvar(navegador);
	}
	
	@After
	public void tearDown() {
		navegador.quit();
	}
	
}

package seuBarrigaPontoCom_estrategia4;

import java.sql.Connection;
import java.sql.SQLException;

import org.junit.Before;
import org.junit.Test;

import br.ce.wcaquino.dao.utils.ConnectionFactory;
import br.ce.wcaquino.entidades.Usuario;
import br.ce.wcaquino.service.UsuarioService;

public class TestService_Usuario {

	private UsuarioService usuarioService = new UsuarioService();
	
	@Before
	public void setUp() throws Exception {
		
		Connection conexaoJDBC = ConnectionFactory.getConnection();
		
		conexaoJDBC.prepareStatement("DELETE FROM usuario").execute();
		
		ConnectionFactory.closeConnection();
	}
	
	@Test
	public void testInsercaoUsuario() throws Exception {
		Connection conexaoJDBC = ConnectionFactory.getConnection();
		
		conexaoJDBC.prepareStatement(""
				+ "INSERT INTO usuarios "
				+ "(id, nome, email, senha, conta_principal_id) "
				+ "VALUES (1, 'Usuario inserido', 'inserido@gmail.com)', '1234', 1)").execute();
		
		ConnectionFactory.closeConnection();
		
		Usuario usuario = usuarioService.findByNome("Usuario inserido");
		
	}
}
